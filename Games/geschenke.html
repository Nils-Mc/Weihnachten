<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÅ Geschenke stapeln</title>

<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  overflow:hidden;
  font-family:system-ui,-apple-system,sans-serif;
  background:radial-gradient(circle at top,#1b4d3e,#061a14);
  color:white;
}

canvas{position:fixed;inset:0}

/* HUD */
.hud{
  position:fixed;
  top:20px;
  left:50%;
  transform:translateX(-50%);
  padding:.8rem 1.6rem;
  border-radius:30px;
  background:rgba(255,255,255,.15);
  backdrop-filter:blur(10px);
  z-index:10;
}

/* Schnee */
.snow{
  position:fixed;
  inset:0;
  pointer-events:none;
  background-image:
    radial-gradient(white 1px,transparent 1px),
    radial-gradient(white 1px,transparent 1px);
  background-size:40px 40px,80px 80px;
  animation:snow 30s linear infinite;
  z-index:2;
}
@keyframes snow{
  from{background-position:0 0,0 0}
  to{background-position:0 2000px,0 3000px}
}

/* Game Over */
#over{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:20;
}
#over div{
  background:rgba(255,255,255,.18);
  backdrop-filter:blur(12px);
  padding:2rem 3rem;
  border-radius:30px;
  text-align:center;
}
</style>
</head>

<body>

<div class="hud">üéÅ H√∂he: <span id="score">0</span></div>
<div class="snow"></div>
<canvas id="game"></canvas>

<div id="over">
  <div>
    <h2>üéÑ Umgefallen!</h2>
    <p>Dein Score: <span id="final"></span></p>
    <button onclick="restart()">Nochmal</button>
  </div>
</div>

<script>
const c=document.getElementById("game");
const ctx=c.getContext("2d");
c.width=innerWidth;
c.height=innerHeight;

let stack=[];
let current;
let score=0;
let running=true;

const gifts=["üéÅ","üéÑ","üß∏","üéÄ","üç™"];

function newGift(){
  current={
    x:c.width/2,
    y:50,
    size:48,
    emoji:gifts[Math.floor(Math.random()*gifts.length)],
    speed:2
  };
}

addEventListener("click",drop);
addEventListener("touchstart",drop);

function drop(){
  if(!running) return;
  stack.push({...current});
  score++;
  document.getElementById("score").textContent=score;
  newGift();
}

function update(){
  if(!running) return;
  ctx.clearRect(0,0,c.width,c.height);

  // Zeichnen
  stack.forEach((g,i)=>{
    ctx.font=g.size+"px serif";
    ctx.textAlign="center";
    ctx.fillText(g.emoji,g.x,c.height-30-i*g.size);
  });

  // aktuelles Geschenk
  if(current){
    current.x+=Math.sin(Date.now()/300)*1.5;
    ctx.font=current.size+"px serif";
    ctx.fillText(current.emoji,current.x,current.y);
  }

  // Umfallen (zu weit seitlich)
  if(stack.length>0){
    const last=stack[stack.length-1];
    if(Math.abs(last.x-c.width/2)>120){
      endGame();
    }
  }

  requestAnimationFrame(update);
}

function endGame(){
  running=false;
  document.getElementById("final").textContent=score;
  document.getElementById("over").style.display="flex";
}

function restart(){
  stack=[];
  score=0;
  running=true;
  document.getElementById("score").textContent=0;
  document.getElementById("over").style.display="none";
  newGift();
  update();
}

newGift();
update();
</script>
</body>
<!-- Unsichtbarer Musik-Player -->
<iframe id="music"
  style="display:none"
  src="https://www.youtube.com/embed/IRfb8roh9KA?enablejsapi=1&controls=0&mute=0&loop=1&playlist=IRfb8roh9KA"
  allow="autoplay">
</iframe>

<script>
let musicStarted = false;
function startMusic(){
  if(musicStarted) return;
  document.getElementById("music").contentWindow.postMessage(
    '{"event":"command","func":"playVideo","args":""}',"*"
  );
  musicStarted = true;
}
addEventListener("click", startMusic, { once:true });
addEventListener("touchstart", startMusic, { once:true });
</script>

</html>
